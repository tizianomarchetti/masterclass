<div class="container">
    <div class="row pt-5 pb-3 text-center">
        <h1 class="text-red">{{'menu.label.subscription' | translate}}</h1>
    </div>
    
    <div class="row mt-3">
        <p class="mb-4">
            Iscriversi Ã¨ semplice
        </p>
        <ul class="ms-md-5">
            <li class="mb-3"><strong>Compila</strong> il modulo qui sotto o, se preferisci, <a href="">scarica il modulo</a> da compilare manualmente</li>
            <li class="mb-3"><strong>Scaricalo</strong> in PDF e firmalo</li>
            <li class="mb-3">Invialo via <strong>WhatsApp</strong> a Francesco (<a href="https://wa.me/+393342791655">334 279 1655</a>) 
                o Andrea (<a href="https://wa.me/+393384241404">338 424 1404</a>) 
                o per <strong>email</strong> a <a href="mailto:banda.giuseppeverdi@libero.it">banda.giuseppeverdi@libero.it</a>
            </li>
            <li>Invia anche una copia dell'avvenuto <strong>pagamento</strong> della quota di iscrizione</li>
        </ul>
    </div>

    <div class="row" [class.pt-4]="!valid" id="errorMessage">
        <p *ngIf="!valid" class="text-danger fw-bold">Compilare correttamente i campi obbligatori</p>
    </div>
    
    <form class="row g-3 mt-3">
        <div class="col-md-6">
            <label for="name" class="form-label fw-bold">Nome*</label>
            <input type="text" class="form-control" [class.border-danger]="!validForm.name" (keyup)="!valid ? validateForm() : null" id="name" name="name" [(ngModel)]="form.name">
        </div>
        <div class="col-md-6">
            <label for="surname" class="form-label fw-bold">Cognome*</label>
            <input type="text" class="form-control" [class.border-danger]="!validForm.surname" (keyup)="!valid ? validateForm() : null" id="surname" name="surname" [(ngModel)]="form.surname">
        </div>
        <div class="col-md-6">
            <label for="phone" class="form-label fw-bold">Telefono*</label>
            <input type="number" class="form-control" [class.border-danger]="!validForm.phone" (keyup)="!valid ? validateForm() : null" id="phone" name="phone" [(ngModel)]="form.phone">
        </div>
        <div class="col-md-6">
            <label for="email" class="form-label fw-bold">Email*</label>
            <input type="email" class="form-control" [class.border-danger]="!validForm.email" (keyup)="!valid ? validateForm() : null" id="email" name="email" [(ngModel)]="form.email">
        </div>
        <fieldset class="col-12 py-4">
            <div class="form-check" role="button">
                <input class="form-check-input" role="button" type="radio" name="subscriptionType" id="subscriptionType1" 
                    [value]="false" [(ngModel)]="form.fullPack" [checked]="!form.fullPack">
                <label class="form-check-label" role="button" for="subscriptionType1">
                    Solo masterclass
                </label>
            </div>
            <div class="form-check" role="button">
                <input class="form-check-input" role="button" type="radio" name="subscriptionType" id="subscriptionType2" 
                    [(ngModel)]="form.fullPack" [value]="true" [checked]="form.fullPack">
                <label class="form-check-label" role="button" for="subscriptionType2">
                    Pensione completa
                </label>
            </div>
        </fieldset>
        
        <div class="col-12">
            <strong>Brani da studiare</strong>
        </div>
        <ng-container *ngFor="let item of form.brani; let i = index">
            <div class="col-md-6">
                <label [for]="'title_' + i" class="form-label">Titolo*</label>
                <input type="text" class="form-control" [class.border-danger]="!validForm.brani[i]?.title" (keyup)="!valid ? validateForm() : null" 
                    [id]="'title_' + i" [name]="'title_' + i" [(ngModel)]="form.brani[i].title">
            </div>
            <div class="col-md-5">
                <label [for]="'author_' + i" class="form-label">Autore*</label>
                <input type="text" class="form-control" [class.border-danger]="!validForm.brani[i]?.author" (keyup)="!valid ? validateForm() : null" 
                    [id]="'author_' + i" [name]="'author_' + i" [(ngModel)]="form.brani[i].author">
            </div>
            <div class="col-md-1 d-flex align-items-end pb-2">
                <label for=""></label>
                <a role="button" class="text-red text-underline" (click)="removeBrano(i)">Rimuovi</a>
            </div>
        </ng-container>
        <p>
            <a role="button" class="text-red text-underline" (click)="addBrano()">
                <i class="fa-solid fa-plus"></i>
                Aggiungi brano
            </a>
        </p>
        
        <div class="col-12">
            <label for="intolleranze" class="form-label fw-bold">Eventuali intolleranze</label>
            <textarea class="form-control" id="intolleranze" rows="3" name="intolleranze" [(ngModel)]="form.intolleranze"></textarea>
        </div>
        
        <div class="col-12 mt-5">
            <button type="submit" (click)="download()" class="btn bg-red text-light">Scarica PDF compilato</button>
        </div>
    </form>
</div>